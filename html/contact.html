<!doctype html>
<html>
    <head>
        <title>Louis Gaspard</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <script> 
            $(function(){
                $("#header").load("/html/header.html"); 
            });
            function surligne(champ, erreur) {
                if (erreur)
                    champ.style.backgroundColor = "#fba";
                else
                    champ.style.backgroundColor = "";
            }
            function verifName(champ) {
                var regex = /^(?=.{1,50}$)[a-z]+(?:['_.\s][a-z]+)*$/i;
                if (!regex.test(champ.value)) {
                    surligne(champ, true);
                    return false;
                } else {
                    surligne(champ, false);
                    return true;
                }
            }
            function verifMail(champ) {
                var regex = /^[a-zA-Z0-9._-]+@[a-z0-9._-]{2,}\.[a-z]{2,4}$/;
                if (!regex.test(champ.value)) {
                    surligne(champ, true);
                    return false;
                } else {
                    surligne(champ, false);
                    return true;
                }
            }
            function verifObject(champ) {
                if(champ.value.length < 2 || champ.value.length > 25) {
                    surligne(champ, true);
                    return false;
                } else {
                    surligne(champ, false);
                    return true;
                }
            }
            function verifMessage(champ) {
                if(champ.value.length < 10) {
                    surligne(champ, true);
                    return false;
                } else {
                    surligne(champ, false);
                    return true;
                }
            }
            function verifForm(f) {
                var fnameOk = verifName(f.fname);
                var lnameOk = verifName(f.lname);
                var mailOk = verifMail(f.mail);
                var objectOk = verifObject(f.object);
                var messageOk = verifMessage(f.message);
                
                if (fnameOk && mailOk && lnameOk && objectOk && messageOk)
                    return true;
                else {
                    alert("Veuillez remplir correctement tous les champs");
                    return false;
                }
            }
        </script> 
    </head>
    <body>
        <div id="header"></div>
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3">
                    <div class="well well-sm">
                        <form class="form-horizontal" action="send_contact" method="post" onsubmit="return verifForm(this)">
                        <fieldset>
                        <legend class="text-center">Me contacter</legend>
                        <div class="form-group">
                            <label class="col-md-3 control-label" for="lname">Nom</label>
                            <div class="col-md-9">
                                <input id="lname" name="lname" type="text" placeholder="Votre nom" class="form-control" onblur="verifName(this)">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label" for="fname">Prénom</label>
                            <div class="col-md-9">
                                <input id="fname" name="fname" type="text" placeholder="Votre prénom" class="form-control" onblur="verifName(this)">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label" for="mail">E-mail</label>
                            <div class="col-md-9">
                                <input id="mail" name="mail" type="text" placeholder="Votre email" class="form-control" onblur="verifMail(this)">
                            </div>
                        </div>
                        </br></br></br>
                        <div class="form-group">
                            <label class="col-md-3 control-label" for="object">Objet</label>
                            <div class="col-md-9">
                                <input id="object" name="object" type="text" placeholder="Objet" class="form-control" onblur="verifObject(this)">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label" for="message">Votre message</label>
                            <div class="col-md-9">
                                <textarea class="form-control" id="message" name="message" placeholder="Entrer votre message ici ..." rows="5" onblur="verifMessage(this)"></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-12 text-right">
                                <button type="submit" class="btn btn-primary btn-lg">Envoyer</button>
                            </div>
                        </div>
                      </fieldset>
                    </form>
                </div>
                <div class="alert alert-info" role="alert">Merci de remplir tout les champs.</div>
            </div>
        </div>
    </body>
</html>